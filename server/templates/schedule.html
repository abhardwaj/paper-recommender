{% extends "base.html" %}
{% block headlink-right %}
Welcome,&nbsp;{{login}}! &nbsp; &nbsp;
<a class="button" href="/index">My CHI</a>
<a class="button" href="/schedule">My Schedule</a>
<a class="button" href="/logout">Log out!</a>
{% endblock %}
{% block content %}
<script type="text/javascript">

	function load_paper (paper_id) {
		window.location.href = "/paper/" + paper_id;
	}


	

	$(document).ready(function(){

		var mon = $('.all').filter('.Monday');
		mon.filter('.t09').appendTo("#Mondayt09");
		mon.filter('.t11').appendTo("#Mondayt11");
		mon.filter('.t14').appendTo("#Mondayt14");
		mon.filter('.t16').appendTo("#Mondayt16");
		

		var tue = $('.all').filter('.Tuesday');
		tue.filter('.t09').appendTo("#Tuesdayt09");
		tue.filter('.t11').appendTo("#Tuesdayt11");
		tue.filter('.t14').appendTo("#Tuesdayt14");
		tue.filter('.t16').appendTo("#Tuesdayt16");

		var wed = $('.all').filter('.Wednesday');
		wed.filter('.t09').appendTo("#Wednesdayt09");
		wed.filter('.t11').appendTo("#Wednesdayt11");
		wed.filter('.t14').appendTo("#Wednesdayt14");
		wed.filter('.t16').appendTo("#Wednesdayt16");

		var thu = $('.all').filter('.Thursday');
		thu.filter('.t09').appendTo("#Thursdayt09");
		thu.filter('.t11').appendTo("#Thursdayt11");
		thu.filter('.t14').appendTo("#Thursdayt14");
		thu.filter('.t16').appendTo("#Thursdayt16");


	  	$('input:checkbox').live('change', function(){
	  		var days_checked = $("input:checked.day")
	  		var times_checked = $("input:checked.time")
	  		var venues_checked = $("input:checked.venue")
	  		var personas_checked = $("input:checked.persona")
			var star = $("input:checked.fav")
	  		var day_classes = ''
		    for(var i=0; i< days_checked.length; i++){
		    	var c = days_checked[i].title		    	
		    	day_classes  += '.'+c + ','    	
		    }
		    day_classes = day_classes.substr(0, day_classes.length-1)
		    console.log(day_classes)
		    time_classes=''
		    for(var i=0; i< times_checked.length; i++){
		    	var c = times_checked[i].title
		    	time_classes += '.'+c + ',';
		    }

		    time_classes = time_classes.substr(0, time_classes.length-1)
		    console.log(time_classes)
		    personas_classes = '';
		    for(var i=0; i< personas_checked.length; i++){
		    	var c = personas_checked[i].title
		    	personas_classes +=  '.' + c + ',';
		    }

		    personas_classes = personas_classes.substr(0, personas_classes.length-1)
		    console.log(personas_classes)
		    venues_classes = ''
		    for(var i=0; i< venues_checked.length; i++){
		    	var c = venues_checked[i].title
		    	venues_classes += '.' + c + ',';
		    }

		    venues_classes = venues_classes.substr(0, venues_classes.length-1)
		    console.log(venues_classes)


		    var select_class = $('.all')
		    if(day_classes != ''){
		    	select_class = select_class.filter(day_classes)
		    }
		    
		    if(time_classes!=''){		    	
		    	select_class = select_class.filter(time_classes)		    	
		    }

		    if(personas_classes!=''){		    	
		    	select_class = select_class.filter(personas_classes)		    	
		    }

		    if(venues_classes!=''){		    	
		    	select_class = select_class.filter(venues_classes)		    	
		    }
		   $('.all').hide();
		   select_class.show();

		    
		});


		function highlight_starred_sessions(){		   
	   		$( ".all" ).each(function(index) {
				if($(this).find('.ui-state-active').length > 0){
					$(this).css('background-color','#fff7ce');
				}else{
					$(this).css('background-color','#f0f4f9');
				}
			});
		   
		}

		function highlight_starred(){		   
	   		$( ".clickable" ).each(function(index) {
				if($(this).find('.ui-state-active').length > 0){
					$(this).addClass('starred');
				}
			});
		   
		}	



		
		$('.all').click(
			function(event){
				$('#'+this.title).toggle();
				if($('#'+this.title).is(':visible')){
					$(this).find('.arrow').html('▾');
				}else{
					$(this).find('.arrow').html('▸');
				}
			});

		

		$('.collapsible-title').click(
			function(event){
				$('#'+this.title).toggle();
				if($('#'+this.title).is(':visible')){
					$(this).find('.arrow').html('▾');
				}else{
					$(this).find('.arrow').html('▸');
				}

			});

		$('.paper-container').click(function(event){
			event.stopPropagation();
		});

		
		$('.ui-state-default').hover(
			function(){ $(this).addClass('ui-state-hover'); }, 
			function(){ $(this).removeClass('ui-state-hover'); }
		);
		

		$('.ui-state-default').click(function(event){ 
			var t =$(this)
			if(t.hasClass('ui-state-active')){
				$.get('/like/' + t.attr('title') +'/unlike', function(res) {
				  if(res.status == 'ok'){
				  	t.toggleClass('ui-state-active');
				  	t.parent().parent().toggleClass('starred');
				  	highlight_starred_sessions();
				  }
				});
			}else{
				$.get('/like/' + t.attr('title') +'/like', function(res) {
				  if(res.status == 'ok'){
				  	t.toggleClass('ui-state-active');
				  	t.parent().parent().toggleClass('starred');
				  	highlight_starred_sessions();
				  }
				});

			}
		});
	
		highlight_starred_sessions();	
		highlight_starred();  		
});

	


</script>

<div id="content" style="padding:0; position:relative; padding-top:20px; box-shadow:none;">
<div class="col1">
<h3><span class="gray">CHI 2013 Program</span></h3>
<br />
<div id="program">
	<div id = "Monday">
	<!--
	<h3 class="collapsible-title">Monday, 09:00-10:20</h3> -->
	<div id = "Mondayt09">
	</div>
	<h3 class="collapsible-title" title="Mondayt11"><span class="arrow">▾</span> Monday, 11:00-12:20</h3>
	<div id = "Mondayt11">
	</div>
	<h3 class="collapsible-title" title="Mondayt14"><span class="arrow">▾</span> Monday, 14:00-15:20</h3>
	<div id = "Mondayt14">
	</div>
	<h3 class="collapsible-title" title="Mondayt16"><span class="arrow">▾</span> Monday, 16:00-17:20</h3>
	<div id = "Mondayt16">
	</div>
	</div>


	<div id="Tuesday">
	<h3 class="collapsible-title" title="Tuesdayt09"><span class="arrow">▾</span> Tuesday, 09:00-10:20</h3>
	<div id = "Tuesdayt09">
	</div>
	<h3 class="collapsible-title" title="Tuesdayt11"><span class="arrow">▾</span> Tuesday, 11:00-12:20</h3>
	<div id = "Tuesdayt11">
	</div>
	<h3 class="collapsible-title" title="Tuesdayt14"><span class="arrow">▾</span> Tuesday, 14:00-15:20</h3>
	<div id = "Tuesdayt14">
	</div>
	<h3 class="collapsible-title" title="Tuesdayt16"><span class="arrow">▾</span> Tuesday, 16:00-17:20</h3>
	<div id = "Tuesdayt16">
	</div>
	</div>


	<div id = "Wednesday">
	<h3 class="collapsible-title" title="Wednesdayt09"><span class="arrow">▾</span> Wednesday, 09:00-10:20</h3>
	<div id = "Wednesdayt09">
	</div>
	<h3 class="collapsible-title" title="Wednesdayt11"><span class="arrow">▾</span> Wednesday, 11:00-12:20</h3>
	<div id = "Wednesdayt11">
	</div>
	<h3 class="collapsible-title" title="Wednesdayt14"><span class="arrow">▾</span> Wednesday, 14:00-15:20</h3>
	<div id = "Wednesdayt14">
	</div>
	<h3 class="collapsible-title" title="Wednesdayt16"><span class="arrow">▾</span> Wednesday, 16:00-17:20</h3>
	<div id = "Wednesdayt16">
	</div>
	</div>



	<div id = "Thursday">
<!-- h3 class="collapsible-title">Thursday, 09:00-10:20</h3> -->
	<div id = "Thursdayt09">
	</div>
	<h3 class="collapsible-title" title="Thursdayt11"><span class="arrow">▾</span> Thursday, 11:00-12:20</h3>
	<div id = "Thursdayt11">
	</div>
	<h3 class="collapsible-title" title="Thursdayt14"><span class="arrow">▾</span> Thursday, 14:00-15:20</h3>
	<div id = "Thursdayt14">
	</div>
	<!--
	<h3 class="collapsible-title" title="Thursdayt16"><span class="arrow">▾</span> Thursday, 16:00-17:20</h3>-->
	<div id = "Thursdayt16">
	</div>
	</div>

</div>
</div>

<div class="col2">
<h3><span class="gray">Filter Options</span></h3>
<br />
<h4>Venue</h4>	
<div id ="venue_filter">				
	<input type="checkbox" title="course" class="venue"/> <span class="gray">Course</span><br />	
	<input type="checkbox" title="panel" class="venue"/> <span class="gray">Panel</span><br />		
	<input type="checkbox" title="SIG" class="venue"/> <span class="gray">SIG</span><br />	
	<input type="checkbox" title="altchi" class="venue"/> <span class="gray">Alt CHI</span><br />	

	<input type="checkbox" title="casestudy" class="venue"/><span class="gray">Case Study</span><br />
	<input type="checkbox" title="paper" class="venue"/><span class="gray">Paper</span><br />
	<input type="checkbox" title="special" class="venue"/> <span class="gray">Special</span><br />		
	<input type="checkbox" title="bof" class="venue"/> <span class="gray">BOF</span><br />
</div>

<h4>Day</h4>
<div id ="day_filter">		
	<input type="checkbox" title="Monday" class="day" /> <span class="gray">Monday</span><br />		
	<input type="checkbox" title="Tuesday" class="day"/> <span class="gray">Tuesday</span><br />		
	<input type="checkbox" title="Wednesday" class="day"/> <span class="gray">Wednesday</span><br />	
	<input type="checkbox" title="Thursday" class="day"/> <span class="gray">Thursday</span><br />
</div>

<h4>Time</h4>
<div id ="time_filter">
	<input type="checkbox" title="t09" class="time"/> <span class="gray">09:00-10:20</span><br />		
	<input type="checkbox" title="t11" class="time"/> <span class="gray">11:00-12:20</span><br />	
	<input type="checkbox" title="t14" class="time"/> <span class="gray">14:00-15:20</span><br />		
	<input type="checkbox" title="t16" class="time"/> <span class="gray">16:00-17:20</span><br />
</div>


<h4>Persona</h4>
<div id ="persona_filter">
	<input type="checkbox" title="On" class="persona"/> <span class="gray">Online social communities &amp; crowdsourcing</span><br />
	<input type="checkbox" title="De" class="persona"/> <span class="gray">Design</span><br />			
	<input type="checkbox" title="UI" class="persona"/> <span class="gray">UIST</span><br />		
	<input type="checkbox" title="Vi" class="persona"/> <span class="gray">Visualization</span><br />
		
	<input type="checkbox" title="En" class="persona"/> <span class="gray">Engagement</span><br />	
	<input type="checkbox" title="IO" class="persona"/> <span class="gray">IO</span><br />	
	<input type="checkbox" title="fo" class="persona"/> <span class="gray">For a cause</span><br />	
	<input type="checkbox" title="Mi" class="persona"/> <span class="gray">Misc</span><br />	

	<input type="checkbox" title="Se" class="persona"/> <span class="gray">Security and privacy</span><br />	
	<input type="checkbox" title="Et" class="persona"/> <span class="gray">Ethics</span><br />		
	<input type="checkbox" title="Ki" class="persona"/> <span class="gray">Kids and learning </span><br />	
	<input type="checkbox" title="He" class="persona"/> <span class="gray">Health</span><br />	
</div>



</div>
</div>

<div class="hidden" style="display:none">
	{% for s_id, session in sessions.items %}
	<div class="all {{session.date}} t{{session.time|slice:":2"}} {{session.venue}} {{session.personas|slice:":2"}}" title="{{s_id}}">	
	<ul style="border-bottom:1px solid #ccc; padding:10px;">	
		<li class="strong"><span class="arrow">▸</span> {{session.s_title}}</li>
		<li class="gray">Room: {{session.room}}, Venue: {{session.venue}}, Persona: {{session.personas}}</li>
	</ul>
	<div id="{{s_id}}"  style="display:none;">		
	{% for id, paper in session.submissions.items %}
		<table class="paper-container"><tr class="clickable">
		<td class="content" onclick='load_paper("{{id}}")'>		
		<ul>
		<li class="strong">{{paper.title}}</li>
		<li>{{paper.c_and_b}}</li>
		<li class="blue">
			{% for author in paper.authors %}
				{{author.givenName}} {{author.familyName}}&nbsp;&nbsp;&nbsp;&nbsp;
			{% endfor %}
		</li>	
		<li class='gray'>{{paper.keywords}}</li>
		</ul>
		</td>
		<td class="metadata">
			{% if id in starred %}
				<div class="ui-state-default ui-corner-all ui-state-active" title="{{id}}">
			{% else %}
				<div class="ui-state-default ui-corner-all" title="{{id}}">
			{%endif%}
				<span class="ui-icon ui-icon-star"></span>
			</div>
		</td>
		</tr></table>			
	{% endfor %}
	</div>
	</div>
{% endfor %}
</div>

{% endblock %}
