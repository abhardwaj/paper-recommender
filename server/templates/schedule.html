{% extends "base.html" %}
{% block headlink-right %}
Welcome,&nbsp;{{login}}! &nbsp; &nbsp;
<a class="button" href="/index">Home</a>
<a class="button" href="/users">Authors List</a>
<a class="button" href="/schedule">Schedule</a>
<a class="button" href="/logout">Log out!</a>
{% endblock %}
{% block content %}
<style>


.ui-widget, .ui-widget-content{
	border-radius: 0px;
	font-family: Calibri, "Gill Sans", "Gill Sans MT", "Lucida Grande", Lucida, Verdana, sans-serif;
	font-size:10pt;
	background: #f0f4f9 !important;
	

}​
.ui-corner-all, .ui-draggable, .ui-resizable{
	box-shadow: 1px 0px 10px #666;
	background: #f0f4f9 !important;
}
.ui-dialog{
	
	border-radius: 0px;
	background: #f0f4f9 !important;
}​

.ui-dialog-titlebar, .ui-widget-header{
	border-radius: 0px;
	border:none;
	background: #f0f4f9 !important;
}


ul.dialog-list {
	background: #f0f4f9;
}

ul.dialog-list:hover {
	background-color: #D7ECFA;
	cursor: pointer;
}


#schedule{
	border-spacing: 0px;
	border: 1px solid #ccc;
}
#schedule td{
	padding: 5px;
	margin: 0;
	text-align: left;
	vertical-align: top;
	border-top: 1px solid #ccc;
	border-right: 1px solid #ccc;
}




#schedule td table{
	padding: 0;
	margin: 0;
	text-align: left;
	vertical-align: top;
	width:100%;
}

#schedule td table tr td{
	text-align: left;
	vertical-align: top;
	border:none;
	padding: 0px;
}

#schedule th{
	padding: 5px;
	text-align: left;
	vertical-align: top;
	border-right: 1px solid #ccc;
}
</style>
<script type="text/javascript">

	function load_paper (paper_id) {
		window.location.href = "/paper/" + paper_id;
	}


	function load_session (s_id) {
		$('#'+s_id).dialog(
			{width: 800,
			height:600,
			resizable: false
		});
	}

	$(document).ready(function(){	
		
		


		var papers = $('#papers').dataTable({
			"sDom": '<"top"f<"clear">>rt<"bottom"ilp<"clear">>',
			"bPaginate": false,
			"bFilter": true,
			"bInfo": false,
			"sWidth": "100%",
			"aaSorting": [[0,'asc'], [1,'asc']],
			"aoColumns": [                 
				{"sWidth": "10%"},
				{"sWidth": "10%"},
				{"sWidth": "10%"},
				{"sWidth": "70%"}
			]
			
		});



	  	$('input:checkbox').live('change', function(){
	  		var days_checked = $("input:checked.day")
	  		var times_checked = $("input:checked.time")
	  		var venues_checked = $("input:checked.venue")
	  		var personas_checked = $("input:checked.persona")
	  		var day_classes = ''
		    for(var i=0; i< days_checked.length; i++){
		    	var c = days_checked[i].title		    	
		    	day_classes  += '.'+c + ','    	
		    }
		    day_classes = day_classes.substr(0, day_classes.length-1)
		    console.log(day_classes)
		    time_classes=''
		    for(var i=0; i< times_checked.length; i++){
		    	var c = times_checked[i].title
		    	time_classes += '.'+c + ',';
		    }

		    time_classes = time_classes.substr(0, time_classes.length-1)
		    console.log(time_classes)
		    personas_classes = '';
		    for(var i=0; i< personas_checked.length; i++){
		    	var c = personas_checked[i].title
		    	personas_classes +=  '.' + c + ',';
		    }

		    personas_classes = personas_classes.substr(0, personas_classes.length-1)
		    console.log(personas_classes)
		    venues_classes = ''
		    for(var i=0; i< venues_checked.length; i++){
		    	var c = venues_checked[i].title
		    	venues_classes += '.' + c + ',';
		    }

		    venues_classes = venues_classes.substr(0, venues_classes.length-1)
		    console.log(venues_classes)


		    var select_class = $('.all')
		    if(day_classes != ''){
		    	select_class = select_class.filter(day_classes)
		    }
		    
		    if(time_classes!=''){		    	
		    	select_class = select_class.filter(time_classes)		    	
		    }

		    if(personas_classes!=''){		    	
		    	select_class = select_class.filter(personas_classes)		    	
		    }

		    if(venues_classes!=''){		    	
		    	select_class = select_class.filter(venues_classes)		    	
		    }
		   $('.all').hide()
		   select_class.show();
		    
		});


		
		$(".filter").click(function(){
    		$("#schedule_filter").toggle();
    		$('.filter').toggle();
  		});

	  	
	  		
	});

	


</script>

<div id="content">
<h3><span class="gray">Schedule Filter Options</span> <a class="button filter" href="#" style="font-size:small; display:none;">SHOW</a> <a class="button filter" href="#" style="font-size:small;">HIDE</a></h3> <br />
<div id ="schedule_filter">
<span class="strong">Please check the filter options below</span><br />
<span class="gray">For all checked selections - first logical OR is applied within each column and then logical AND is applied across the columns. For filtering on other options (like filter by author name, keywords, room, contributions and benefits, etc.) you can put the search keywords in the table below.</span>
<br />
<table id="schedule" style="width:100%">
	<tr>
		<th>
			Day
		</th>
		<th>
			Time
		</th>
		<th>
			Persona
		</th>
		<th>
			Venue
		</th>
	</tr>
	<tr>
		<td>
		
			<input type="checkbox" title="Monday" class="day"/> <span class="gray">Monday</span><br />		
			<input type="checkbox" title="Tuesday" class="day"/> <span class="gray">Tuesday</span><br />		
			<input type="checkbox" title="Wednesday" class="day"/> <span class="gray">Wednesday</span><br />	
			<input type="checkbox" title="Thursday" class="day"/> <span class="gray">Thursday</span><br />
		
			
		</td>
	
		<td>
		
			<input type="checkbox" title="t09" class="time"/> <span class="gray">09:00-10:20</span><br />		
			<input type="checkbox" title="t11" class="time"/> <span class="gray">11:00-12:20</span><br />	
			<input type="checkbox" title="t14" class="time"/> <span class="gray">14:00-15:20</span><br />		
			<input type="checkbox" title="t16" class="time"/> <span class="gray">16:00-17:20</span><br />
		
		</td>
	
		<td>
		
			<input type="checkbox" title="On" class="persona"/> <span class="gray">Online social communities &amp; crowdsourcing</span><br />
			<input type="checkbox" title="De" class="persona"/> <span class="gray">Design</span><br />			
			<input type="checkbox" title="UI" class="persona"/> <span class="gray">UIST</span><br />		
			<input type="checkbox" title="Vi" class="persona"/> <span class="gray">Visualization</span><br />
				
			<input type="checkbox" title="En" class="persona"/> <span class="gray">Engagement</span><br />	
			<input type="checkbox" title="IO" class="persona"/> <span class="gray">IO</span><br />	
			<input type="checkbox" title="fo" class="persona"/> <span class="gray">For a cause</span><br />	
			<input type="checkbox" title="Mi" class="persona"/> <span class="gray">Misc</span><br />	
			
			<input type="checkbox" title="Se" class="persona"/> <span class="gray">Security and privacy</span><br />	
			<input type="checkbox" title="Et" class="persona"/> <span class="gray">Ethics</span><br />		
			<input type="checkbox" title="Ki" class="persona"/> <span class="gray">Kids and learning </span><br />	
			<input type="checkbox" title="He" class="persona"/> <span class="gray">Health</span><br />	
				
		</td>
	
		<td>
					
			<input type="checkbox" title="course" class="venue"/> <span class="gray">Course</span><br />	
			<input type="checkbox" title="panel" class="venue"/> <span class="gray">Panel</span><br />		
			<input type="checkbox" title="SIG" class="venue"/> <span class="gray">SIG</span><br />	
			<input type="checkbox" title="altchi" class="venue"/> <span class="gray">Alt CHI</span><br />	
		
			<input type="checkbox" title="casestudy" class="venue"/><span class="gray">Case Study</span><br />
			<input type="checkbox" title="paper" class="venue"/><span class="gray">Paper</span><br />
			<input type="checkbox" title="special" class="venue"/> <span class="gray">Special</span><br />		
			<input type="checkbox" title="bof" class="venue"/> <span class="gray">BOF</span><br />
					
		</td>
	</tr>
</table>
</div>
<br />
<br />
<table id="papers">
	<thead>
		<tr>
			<th>Date</th>
			<th>Time</th>
			<th>Room</th>
			<th>Sessions matching the criteria</th>
		</tr>
	</thead>
	<tbody>
	{% for s_id, session in sessions.items %}
		<tr class="all {{session.date}} t{{session.time|slice:":2"}} {{session.venue}} {{session.personas|slice:":2"}}" style="border-bottom:1px solid #ccc; padding:10px;" onclick='load_session("{{s_id}}")'>
			<td>
				{{session.date}}
			</td>
			<td>
				 {{session.time}}
			</td>
			<td>
				 {{session.room}}
			</td>
			<td>
			<ul>
			<li class="strong">{{session.s_title}}</li> 
			<li class="gray">{{session.venue}}, {{session.personas}}</li>
			</ul>
			<div id="{{s_id}}" class="dialog" title="{{session.s_title}}" style="display:none;">
			<ul class="form" style="margin-top:0px;">
			<li class="strong">Session Schedule</li>
			<li class="gray"><span class="strong">Date: </span>{{session.date}}</li>
			<li class="gray"><span class="strong">Time: </span>{{session.time}}</li>
			<li class="gray"><span class="strong">Room: </span>{{session.room}}</li>
			<li class="gray"><span class="strong">Venue: </span>{{session.venue}}</li>
			<li class="gray"><span class="strong">Persona: </span>{{session.personas}}</li>
			</ul>
			<br />
			<h3><span class="gray">Papers in this session:</span></h3> 
			<br />
		{% for id, paper in session.submissions.items %}		
			<ul class='dialog-list' style="border-bottom:1px solid #ccc; padding:10px;" onclick='load_paper("{{id}}")'>
			<li class="strong">{{paper.title}}</li>
			<li>{{paper.c_and_b}}</li>
			<li class="blue">
				{% for author in paper.authors %}
					{{author.givenName}} {{author.familyName}}&nbsp;&nbsp;&nbsp;&nbsp;
				{% endfor %}
			</li>	
			<li class='gray'>
			{{paper.keywords}}
			</li>
			</ul>			
		{% endfor %}
		</div>
		</td>	
	</tr>
	{% endfor %}
	</tbody>
</table>
</div>
{% endblock %}
